{% extends "base.html" %}
{% load bootstrap4 %}


{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.min.js"></script>

<style>
    .content{
        padding-top: 4px;
        padding-bottom: 20px;
    }
</style>

    <div class="container">
        <div class="row">
            <div class="col-2 d-none d-md-block"></div>
            <div class="col border border-secondary rounded content">
                {% bootstrap_messages %}
                <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="pills-info-tab" data-toggle="pill" href="#pills-info" role="tab" aria-controls="pills-info" aria-selected="false">info</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link " id="pills-Cliente-tab" data-toggle="pill" href="#pills-Cliente" role="tab" aria-controls="pills-Cliente" aria-selected="true">Cliente</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link " id="pills-Tatuador-tab" data-toggle="pill" href="#pills-Tatuador" role="tab" aria-controls="pills-Tatuador" aria-selected="false">Tatuador</a>
                    </li>
                    
                  </ul>
                  <div class="tab-content" id="pills-tabContent">
                    <div class="tab-pane fade show active" id="pills-info" role="tabpanel" aria-labelledby="pills-info-tab">
                        <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent bibendum massa tortor, quis convallis lacus vehicula in. Praesent id imperdiet dolor. Donec ut augue pharetra, tempor leo a, vehicula mi. Phasellus condimentum, leo a faucibus consequat, eros dolor porttitor diam, ut vehicula dolor augue eu urna. Fusce mattis pharetra odio, in imperdiet tortor tempus a. Integer aliquet orci pulvinar nibh suscipit fermentum. Nunc ut augue libero. Curabitur scelerisque sem a quam elementum ultricies. Proin tempor eleifend nisi, et pellentesque nulla vestibulum at. </span>
                        <span>Fusce nec felis ullamcorper, molestie urna nec, tincidunt magna. Mauris viverra tortor sed elit consequat, nec porttitor quam consequat. In tempus, velit id auctor aliquam, libero augue auctor eros, vitae mollis enim nibh sed arcu. Vivamus aliquam sapien a imperdiet dapibus. Integer finibus magna ante, in rutrum turpis convallis nec. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec mattis quis risus et euismod. Donec tempus consectetur massa, non sagittis mauris mollis sed. In rutrum ipsum in dictum porttitor. Maecenas pulvinar erat in ipsum tempor, ac tempor urna porta. Maecenas maximus nisi at nulla iaculis, sed fringilla neque pellentesque. </span>
                        <span>Vivamus eget ultrices justo. Nulla facilisis luctus rhoncus. Suspendisse potenti. Praesent vitae fermentum enim. In at sem non ante pharetra aliquet dignissim ut nisl. Cras vitae dui lacinia, posuere ligula porttitor, interdum lectus. Phasellus eget quam ac orci tristique condimentum. Maecenas tempus, magna eu dapibus ullamcorper, dui magna maximus justo, vel placerat nulla mi et sapien. Cras pulvinar lobortis enim, at semper enim egestas a. Aliquam turpis ex, congue ornare tellus at, lobortis rhoncus nulla. Etiam laoreet, tortor id volutpat convallis, lectus dolor fringilla leo, dignissim suscipit augue felis in lorem. Nunc rutrum facilisis magna, vel faucibus dolor rhoncus semper. Quisque id risus urna. </span>
                        
                    </div>
                    <div class="tab-pane fade" id="pills-Cliente" role="tabpanel" aria-labelledby="pills-Cliente-tab">

                        <form method="POST" action="{% url 'especializar_perfil' %}">
                            {% csrf_token %}
                            <center>
                                <p class="text-seccondary">
                                    <h3>Torne-se um cliente.</h3>
                                </p>
                            </center>
                           
                            <input type="hidden" name="especializacao" value="cliente">
                            {% bootstrap_form formulario_especializacao %}

                            <input class="btn btn-primary btn-block" type="submit" value="Confirmar Especialização ">
                        </form>

                    </div>
                    <div class="tab-pane fade" id="pills-Tatuador" role="tabpanel" aria-labelledby="pills-Tatuador-tab">

                        <form method="POST" action="{% url 'especializar_perfil' %}" enctype="multipart/form-data">
                            {% csrf_token %}
                            <center>
                                <p class="text-seccondary display-6">
                                    <h3>Torne-se um Tatuador.</h3>
                                </p>
                            </center>
                           
                            <input type="hidden" name="especializacao" value="tatuador">
                            {% bootstrap_form formulario_especializacao %}
                            {% bootstrap_form formulario_tatuador %}
                            <p>
                                <button id="addEndereco" class="btn" data-toggle="collapse" href="#formularioEndereco">
                                    <i class="fas fa-plus"></i> Formulario de Endereço
                                </button>
                                <button id="busca_cep" class="btn btn-primary">
                                  Busca por CEP
                                </button>
                              </p>
                              <div class="collapse" id="formularioEndereco">
                                <div class="card card-body">
                                 {% bootstrap_form formulario_endereco %}
                                </div>
                              </div>

                            <input class="btn btn-primary btn-block" type="submit" value="Confirmar Especialização ">
                        </form>

                    </div>               
                  </div>
                
            </div>
            <div class="col-2 d-none d-md-block"></div>
        </div>
    </div>
    <script type="text/javascript">
        $("#cep").mask("00000-000");
        $("#numero").mask("0000");
        $("#cpf").mask("000.000.000-00");
        $("#celular").mask("(00) 0000-0000");
        $("#cnpj").mask("00.000.000/0000-00");
        $("#alvara").mask("0000000000");
        $("#telefone").mask("(00) 0000-0000");
        $(".cpf").mask("000.000.000-00");
        $(".celular").mask("(00) 0000-0000");
        
        $("#rua").click(function(){
            alert("teste");
        });

        $("#rua").change(function(){
            $(this).val($(this).val().toUpperCase());
        });

        $("#busca_cep").click(function(){
            $.ajax({
            method: "GET",
            url: "https://viacep.com.br/ws/"+$("#cep").val()+"/json/",
            beforeSend: function( xhr ) {
               console.log('antes de enviar');
            },
            })
            .done(function(dados) {
                console.log(dados);
                preencher_formulario(dados);
                console.log('success');
            })
            .fail(function(error) {
                console.log('error: ' + error);
            })
            .always(function() {
                console.log('encerrando');
            })
        });

        function preencher_formulario(data){
            $("#cidade").val(data.localidade);
            $("#estado").val(data.uf );
            $("#bairro").val(data.bairro );
            $("#rua").val(data.logradouro );
            $("#numero").val(data.gia);
            $("#complemento").val(data.complemento );
        }
        document.getElementById("addEndereco").addEventListener("click", function(event){
            event.preventDefault()
        });
        document.getElementById("busca_cep").addEventListener("click", function(event){
            event.preventDefault()
        });
    </script>
{% endblock %}
    